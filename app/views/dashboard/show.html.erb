<div class="mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col">
  <h6>Gastos nos últimos 30 dias</h6>
  <div id="user-spending" class="graph"></div>
</div>
<div class="mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--6-col">
  <h6>Últimos gastos</h6>
  <div style="overflow: auto">
    <ul class="mdl-list spending">
      <% @latest_spending.each do |credit| %>
          <li class="mdl-list__item--two-line">

          <span class="mdl-list__item-primary-content">
            <% if credit.tag.present? %>
              <i class="material-icons mdl-list__item-avatar"><%= credit.tag.icon %></i>
          <% end %>
            <span><%= l credit.date.to_date, format: :default %> - <%= credit.name %></span>
        <span class="mdl-list__item-sub-title"><%= number_to_currency credit.value %></span>
      </span>
          </li>
      <% end %>
    </ul>
  </div>
</div>
<div class="mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--6-col">
  <h6>Gastos por categoria nos últimos 30 dias</h6>
</div>
<div class="mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--6-col">
  <h6>Gastos vs. despesas nos últimos 30 dias</h6>
</div>
<div class="mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--6-col">
  <h6>Contas a vencer</h6>
</div>


<% content_for :body do %>
    <script type="text/javascript" charset="utf-8">
        Highcharts.chart('user-spending', {
            title: {
                text: null
            },
            xAxis: {
                categories: [<%= @spending[0].map{|d| '"' + d.strftime('%d/%m') + '"'}.join(',').html_safe %>]
            },
            yAxis: {
                title: {
                    text: 'Valor Gasto'
                }
            },
            tooltip: {
                valuePrefix: 'R$ '
            },
            series: [{
                name: 'Gastos',
                data: [<%= @spending[1].join(', ') %>]
            }],
            legend: { enabled: false },
            credits: { enabled: false },
            plotOptions: {
                series: {
                    color: '#E00'
                }
            }
        });
    </script>
<% end %>
